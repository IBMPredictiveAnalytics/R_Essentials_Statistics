Building the InvokeR Shared Library

Introduction
------------
This SDK directory is used to:
    -- build InvokeR Library for Windows platforms, e.g. Win32, Win64
    -- build libInvokeR Library for UNIX platforms, e.g. AIX64, Linux32, 
       Linux64, SunOS64, HP-UX64, MacOS and ZLinux64

Prerequisites
-------------
    Visual Studio 2008 has to be installed (for Windows platform).
    R 2.14.* has to be installed (For Win32, Win64, AIX64, Linux32, Linux64, SunOS64, HP-UX64, MacOS and ZLinux64 platforms)
    For win32, Rtools has to be installed. You can download it from http://www.murdoch-sutherland.com/Rtools.
    For win32, pexports.exe has to be copied into <Rtools installation location>\MinGW\bin. You can download mingw-utils-0.3.tar.gz from 
    http://sourceforge.net/projects/mingw/files_beta/MinGW/Utilities/mingw-utils/mingw-utils-0.3/ and extract pexports.exe from it.


Environment variables
---------------------
The following environment variable must be set prior to building the InvokeR
shared library:
    R_HOME - must be defined as the location of your R installation


Building InvokeR.dll (for win32 platform)
----------------------------------------------
Building Rdll.lib and Rgraphapp.lib
  Open a Visual Studio 2008 command prompt and go to the bin/i386 directory under R_HOME.
  Use the following command to build Rdll.lib and Rgraphapp.lib:
      pexports R.dll > R.def
      LIB /DEF:R.def /MACHINE:IX86 /out:Rdll.lib
      
      pexports Rgraphapp.dll > Rgraphapp.def
      LIB /DEF:Rgraphapp.def /MACHINE:IX86
      
  Copy Rdll.lib and Rgraphapp.lib to \...\DX_API\InvokeR\mak\libs
  
Using Visual Studio 2008
  There is a Visual Studio project file located under
  \...\DX_API\InvokeR\PCBuild\. Open InvokeR.vcproj,
  select release option, build InvokeR.dll.

Using a Makefile
  You can also build InvokeR.dll using invokeR.mak. First, open a
  Visual Studio 2008 command prompt. Then go to the directory
  \...\DX_API\InvokeR\mak\ and build InvokeR.dll by
  using the following command:
      nmake -f invokeR.mak


Building the InvokeR Library (for UNIX platforms)
---------------------------------------------
There is a Makefile located under \...\DX_API\InvokeR\gnumak\.
Go to the directory \...\DX_API\InvokeR\gnumak\
and run following command from shell:
      (g)make -f invokeR.mk
      If you need the 64-bit lib on Linux64 and ZLinux64, use: (g)make -f invokeR.mk PLATFORM=64


Output files
------------
  Windows:
     If the project file is used, output files will be put into the \...\DX_API\InvokeR\PCBuild\Release subdirectory.
     If the make file is used, output files will be put into the \...\DX_API\InvokeR\Release subdirectory.
  AIX64:
     Output files will be put into the \...\DX_API\InvokeR\aix64 subdirectory.
  Linux32:
     Output files will be put into the \...\DX_API\InvokeR\lintel subdirectory.   
  Linux64:
     Output files will be put into the \...\DX_API\InvokeR\lintel64 subdirectory.
  SunOS64:
     Output files will be put into the \...\DX_API\InvokeR\solaris_sparc64 subdirectory.
  HP-UX64:
     Output files will be put into the \...\DX_API\InvokeR\hpux_it subdirectory.
  MacOS:
     Output files will be put into the \...\DX_API\InvokeR\macosx subdirectory.
   ZLinux64:
     Output files will be put into the \...\DX_API\InvokeR\zlinux64 subdirectory.       
     

Notes
-----
Built this way, InvokeR.dll is a release build.

After the build succeeds, a corresponding change needs to be made to spssdxcfg.ini in
order to use the Plug-in functionality with IBM® SPSS® Statistics. Also, you will 
need to copy this file and the libInvokeR library to your IBM SPSS Statistics installation 
location.
On Windows, copy both spssdxcfg.ini and the InvokeR library to the 
root directory of $SPSS_HOME.
On UNIX platforms, copy spssdxcfg.ini to $SPSS_HOME/bin and copy the libInvokeR 
library to $SPSS_HOME/lib.


© Copyright IBM Corp. 1989, 2013